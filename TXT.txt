source venv/bin/activate

python manage.py runserver


python manage.py makemessages -l kk
python manage.py makemessages -l en

python manage.py compilemessages

Добавление новой категории (например, **«Эрудиция»**) — это простая процедура. Нам нужно обновить список доступных категорий в двух местах: в приложении тестов (чтобы создавать вопросы) и в приложении пользователей (чтобы выбирать эту категорию для бота).

### Шаг 1. Обновляем `quiz/models.py`

Откройте файл `quiz/models.py`.
Найдите список `CATEGORY_CHOICES` в самом верху и добавьте туда новую строчку:

```python
# quiz/models.py

CATEGORY_CHOICES = [
    ('logic', 'Логика'),
    ('math', 'Математика'),
    ('spatial', 'Пространственное мышление'),
    ('memory', 'Память'),
    ('erudition', 'Эрудиция'), # <--- НОВАЯ КАТЕГОРИЯ
]

# Остальной код ниже не трогаем...
```

*Обратите внимание: первое слово `'erudition'` — это код для базы данных (пишем латиницей), второе `'Эрудиция'` — это то, что видят люди в админке.*

-----

### Шаг 2. Обновляем `users/models.py`

Теперь нужно добавить этот выбор в профиль пользователя, чтобы он мог сказать боту: "Хочу задачи на Эрудицию".

Откройте `users/models.py`:

```python
# users/models.py

# Найдите этот список (он может называться CATEGORY_CHOICES или LANG_CHOICES, ищем тот, где категории)
CATEGORY_CHOICES = [
    ('logic', 'Логика'),
    ('math', 'Математика'),
    ('spatial', 'Пространственное мышление'),
    ('memory', 'Память'),
    ('erudition', 'Эрудиция'), # <--- ДОБАВЛЯЕМ СЮДА ТОЖЕ
]

class CustomUser(AbstractUser):
    # ...
```

-----

### Шаг 3. Фиксируем изменения

Даже если мы просто поменяли текст в списке, Django иногда требует обновить миграции, чтобы админка работала корректно.

В терминале выполните:

```bash
python manage.py makemigrations
python manage.py migrate
```

-----

### Шаг 4. Как добавлять вопросы через CSV

Теперь, когда вы будете готовить файл `questions_trilingual.csv`, вы можете использовать код `erudition` в первой колонке.

**Пример строки для CSV:**

```csv
erudition;Столица Франции?;Францияның астанасы?;Capital of France?;0;30;Париж;Париж;Paris;Лондон;Лондон;London;Берлин;Берлин;Berlin;Рим;Рим;Rome;;
```

### Шаг 5. Проверка

1.  Запустите сервер: `python manage.py runserver`
2.  Зайдите в Админку -\> **Questions**.
3.  Попробуйте создать новый вопрос — в выпадающем списке "Категория" должна появиться **"Эрудиция"**.
4.  Зайдите в **Users** (Пользователи) — там тоже в поле "Категория для бота" должна появиться **"Эрудиция"**.

Всё готово\! Теперь можно загружать вопросы на общую эрудицию.
